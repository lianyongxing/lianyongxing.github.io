<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>一致性Hash算法 | LIANYONGXING. BLOG</title>
    <meta name="description" content="May the force be with u.">
    <meta name="generator" content="VuePress 1.4.0">
    <link rel="icon" href="ficon.jpeg">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.7.1/katex.min.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/github-markdown-css/2.10.0/github-markdown.min.css">
    
    <link rel="preload" href="/assets/css/0.styles.a5323663.css" as="style"><link rel="preload" href="/assets/js/app.acaacfed.js" as="script"><link rel="preload" href="/assets/js/2.858fe96a.js" as="script"><link rel="preload" href="/assets/js/12.a9ef9aaf.js" as="script"><link rel="prefetch" href="/assets/js/10.652038c7.js"><link rel="prefetch" href="/assets/js/100.2dd9d0f2.js"><link rel="prefetch" href="/assets/js/101.487a243a.js"><link rel="prefetch" href="/assets/js/102.0c61121f.js"><link rel="prefetch" href="/assets/js/103.4dbe63e3.js"><link rel="prefetch" href="/assets/js/104.7f502b03.js"><link rel="prefetch" href="/assets/js/105.6e83f9e6.js"><link rel="prefetch" href="/assets/js/106.5409dca1.js"><link rel="prefetch" href="/assets/js/107.7ad54acd.js"><link rel="prefetch" href="/assets/js/108.3486f36a.js"><link rel="prefetch" href="/assets/js/109.5ee4cd3b.js"><link rel="prefetch" href="/assets/js/11.4f8ea0df.js"><link rel="prefetch" href="/assets/js/110.6417250e.js"><link rel="prefetch" href="/assets/js/111.ded28c89.js"><link rel="prefetch" href="/assets/js/112.94f5b6c6.js"><link rel="prefetch" href="/assets/js/113.3b1fe42e.js"><link rel="prefetch" href="/assets/js/114.0e643f0c.js"><link rel="prefetch" href="/assets/js/115.32a16f28.js"><link rel="prefetch" href="/assets/js/13.acff38a0.js"><link rel="prefetch" href="/assets/js/14.113e66b1.js"><link rel="prefetch" href="/assets/js/15.19b59d69.js"><link rel="prefetch" href="/assets/js/16.4ee77b14.js"><link rel="prefetch" href="/assets/js/17.a5b6d566.js"><link rel="prefetch" href="/assets/js/18.744a9950.js"><link rel="prefetch" href="/assets/js/19.fd9e7099.js"><link rel="prefetch" href="/assets/js/20.66903b5c.js"><link rel="prefetch" href="/assets/js/21.c98f5d06.js"><link rel="prefetch" href="/assets/js/22.a0056c91.js"><link rel="prefetch" href="/assets/js/23.73369199.js"><link rel="prefetch" href="/assets/js/24.dc5b3fc5.js"><link rel="prefetch" href="/assets/js/25.bf612edb.js"><link rel="prefetch" href="/assets/js/26.b9dd7686.js"><link rel="prefetch" href="/assets/js/27.371379cd.js"><link rel="prefetch" href="/assets/js/28.4a33fe83.js"><link rel="prefetch" href="/assets/js/29.be42af3d.js"><link rel="prefetch" href="/assets/js/3.47952932.js"><link rel="prefetch" href="/assets/js/30.37bd8e9e.js"><link rel="prefetch" href="/assets/js/31.58f89f44.js"><link rel="prefetch" href="/assets/js/32.741f73e3.js"><link rel="prefetch" href="/assets/js/33.a9c7dcb5.js"><link rel="prefetch" href="/assets/js/34.c3f829b5.js"><link rel="prefetch" href="/assets/js/35.29c897d0.js"><link rel="prefetch" href="/assets/js/36.1e02f622.js"><link rel="prefetch" href="/assets/js/37.a1d23a14.js"><link rel="prefetch" href="/assets/js/38.06964860.js"><link rel="prefetch" href="/assets/js/39.384a454e.js"><link rel="prefetch" href="/assets/js/4.7feb14c8.js"><link rel="prefetch" href="/assets/js/40.c7e4dfb7.js"><link rel="prefetch" href="/assets/js/41.3e5c5125.js"><link rel="prefetch" href="/assets/js/42.dcf19498.js"><link rel="prefetch" href="/assets/js/43.54203bcb.js"><link rel="prefetch" href="/assets/js/44.9cccb36c.js"><link rel="prefetch" href="/assets/js/45.3ce2a56c.js"><link rel="prefetch" href="/assets/js/46.17aac222.js"><link rel="prefetch" href="/assets/js/47.57ed0257.js"><link rel="prefetch" href="/assets/js/48.8baebce7.js"><link rel="prefetch" href="/assets/js/49.7eb16be5.js"><link rel="prefetch" href="/assets/js/5.55c31470.js"><link rel="prefetch" href="/assets/js/50.06274b55.js"><link rel="prefetch" href="/assets/js/51.b50e24a8.js"><link rel="prefetch" href="/assets/js/52.7b92239f.js"><link rel="prefetch" href="/assets/js/53.fb7cbb6a.js"><link rel="prefetch" href="/assets/js/54.d047b5f1.js"><link rel="prefetch" href="/assets/js/55.6e2fd120.js"><link rel="prefetch" href="/assets/js/56.fa7ee707.js"><link rel="prefetch" href="/assets/js/57.31b7d0a7.js"><link rel="prefetch" href="/assets/js/58.80cddbc7.js"><link rel="prefetch" href="/assets/js/59.92b2b0f2.js"><link rel="prefetch" href="/assets/js/6.792ce084.js"><link rel="prefetch" href="/assets/js/60.9ab8e458.js"><link rel="prefetch" href="/assets/js/61.b3abbf87.js"><link rel="prefetch" href="/assets/js/62.2bde1ed2.js"><link rel="prefetch" href="/assets/js/63.39cf6423.js"><link rel="prefetch" href="/assets/js/64.c839079e.js"><link rel="prefetch" href="/assets/js/65.ea1754c1.js"><link rel="prefetch" href="/assets/js/66.802ec528.js"><link rel="prefetch" href="/assets/js/67.a30d6fff.js"><link rel="prefetch" href="/assets/js/68.d98ac090.js"><link rel="prefetch" href="/assets/js/69.083b1217.js"><link rel="prefetch" href="/assets/js/7.3964fa52.js"><link rel="prefetch" href="/assets/js/70.272720ba.js"><link rel="prefetch" href="/assets/js/71.386b54d7.js"><link rel="prefetch" href="/assets/js/72.005e615f.js"><link rel="prefetch" href="/assets/js/73.b1266355.js"><link rel="prefetch" href="/assets/js/74.9ab08f58.js"><link rel="prefetch" href="/assets/js/75.eefe4ff0.js"><link rel="prefetch" href="/assets/js/76.e4162716.js"><link rel="prefetch" href="/assets/js/77.e1ead4d7.js"><link rel="prefetch" href="/assets/js/78.ae9b9cc3.js"><link rel="prefetch" href="/assets/js/79.eeaf4627.js"><link rel="prefetch" href="/assets/js/8.5ccbfc45.js"><link rel="prefetch" href="/assets/js/80.0272858c.js"><link rel="prefetch" href="/assets/js/81.bbc0907f.js"><link rel="prefetch" href="/assets/js/82.4de7fcc4.js"><link rel="prefetch" href="/assets/js/83.2ad342e1.js"><link rel="prefetch" href="/assets/js/84.3398b3bb.js"><link rel="prefetch" href="/assets/js/85.be446d7c.js"><link rel="prefetch" href="/assets/js/86.1ef2094d.js"><link rel="prefetch" href="/assets/js/87.53795a29.js"><link rel="prefetch" href="/assets/js/88.1c3ba029.js"><link rel="prefetch" href="/assets/js/89.a4797bc8.js"><link rel="prefetch" href="/assets/js/9.1e695694.js"><link rel="prefetch" href="/assets/js/90.12ceffe8.js"><link rel="prefetch" href="/assets/js/91.40c9fc92.js"><link rel="prefetch" href="/assets/js/92.9648154b.js"><link rel="prefetch" href="/assets/js/93.d4e90cec.js"><link rel="prefetch" href="/assets/js/94.50b5eb64.js"><link rel="prefetch" href="/assets/js/95.9d54c125.js"><link rel="prefetch" href="/assets/js/96.fce496cb.js"><link rel="prefetch" href="/assets/js/97.86a56b4e.js"><link rel="prefetch" href="/assets/js/98.cf20fa6d.js"><link rel="prefetch" href="/assets/js/99.92c0c3e3.js">
    <link rel="stylesheet" href="/assets/css/0.styles.a5323663.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">LIANYONGXING. BLOG</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/index.html" class="nav-link">
  Home
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Blog" class="dropdown-title"><span class="title">Blog</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/NLP/" class="nav-link">
  NLP
</a></li><li class="dropdown-item"><!----> <a href="/blog/machineLearning/" class="nav-link">
  MachineLearning
</a></li><li class="dropdown-item"><!----> <a href="/blog/Papers/" class="nav-link">
  Papers
</a></li><li class="dropdown-item"><!----> <a href="/blog/recommenderSystem/" class="nav-link">
  RecommenderSystem
</a></li><li class="dropdown-item"><!----> <a href="/blog/ObjectDetection/" class="nav-link">
  ObjectDetection
</a></li><li class="dropdown-item"><!----> <a href="/blog/os/" class="nav-link">
  OperatorSystem
</a></li><li class="dropdown-item"><!----> <a href="/blog/cookies/" class="nav-link router-link-active">
  Cookies
</a></li></ul></div></div><div class="nav-item"><a href="https://github.com/lianyongxing" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="/about/" class="nav-link">
  About
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/index.html" class="nav-link">
  Home
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Blog" class="dropdown-title"><span class="title">Blog</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/NLP/" class="nav-link">
  NLP
</a></li><li class="dropdown-item"><!----> <a href="/blog/machineLearning/" class="nav-link">
  MachineLearning
</a></li><li class="dropdown-item"><!----> <a href="/blog/Papers/" class="nav-link">
  Papers
</a></li><li class="dropdown-item"><!----> <a href="/blog/recommenderSystem/" class="nav-link">
  RecommenderSystem
</a></li><li class="dropdown-item"><!----> <a href="/blog/ObjectDetection/" class="nav-link">
  ObjectDetection
</a></li><li class="dropdown-item"><!----> <a href="/blog/os/" class="nav-link">
  OperatorSystem
</a></li><li class="dropdown-item"><!----> <a href="/blog/cookies/" class="nav-link router-link-active">
  Cookies
</a></li></ul></div></div><div class="nav-item"><a href="https://github.com/lianyongxing" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="/about/" class="nav-link">
  About
</a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/blog/cookies/" class="sidebar-link">概述</a></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>基于RTMP协议的流媒体视频直播</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Prometheus+Grafana+Mongodb数据可视化</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Docker</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>搭建MongoDb分片集群</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Pycharm远程调试</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>2019研究生数学建模B题</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Python日志模块Logging</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>新一代低延时网络传输协议QUIC</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>分布式系统相关</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/cookies/distributedSystem/一致性Hash.html" class="active sidebar-link">一致性Hash算法</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/cookies/distributedSystem/一致性Hash.html#场景" class="sidebar-link">场景</a></li><li class="sidebar-sub-header"><a href="/blog/cookies/distributedSystem/一致性Hash.html#hash算法解决" class="sidebar-link">Hash算法解决</a></li><li class="sidebar-sub-header"><a href="/blog/cookies/distributedSystem/一致性Hash.html#一致性哈希" class="sidebar-link">一致性哈希</a></li></ul></li><li><a href="/blog/cookies/distributedSystem/Paxos算法.html" class="sidebar-link">Paxos算法</a></li><li><a href="/blog/cookies/distributedSystem/buildStorm.html" class="sidebar-link">搭建Apache Storm环境</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="一致性hash算法"><a href="#一致性hash算法" class="header-anchor">#</a> 一致性Hash算法</h1> <h2 id="场景"><a href="#场景" class="header-anchor">#</a> 场景</h2> <p>假如有<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>3</mn><mi>w</mi></mrow><annotation encoding="application/x-tex">3w</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.64444em;"></span><span class="strut bottom" style="height:0.64444em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord mathrm">3</span><span class="mord mathit" style="margin-right:0.02691em;">w</span></span></span></span>张图片，需要缓存到三台服务器上，假设三台服务器编号为01、02、03，我们希望这些图片被均匀缓存到三台服务器上，以便分摊缓存的压力，也就是说，每台服务器大约缓存<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>1</mn><mi>w</mi></mrow><annotation encoding="application/x-tex">1w</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.64444em;"></span><span class="strut bottom" style="height:0.64444em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord mathrm">1</span><span class="mord mathit" style="margin-right:0.02691em;">w</span></span></span></span>张图片。</p> <p>如果没有任何规律地进行平均分配，可以满足我们的要求（每台服务器缓存压力相同），但是如果要找一张图片时，需要遍历3台服务器。遍历的效率太低，因此不被接受。</p> <p>应该如何解决这个问题呢？</p> <h2 id="hash算法解决"><a href="#hash算法解决" class="header-anchor">#</a> Hash算法解决</h2> <p>原始的做法：</p> <p>对缓存项的键进行哈希，将<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>h</mi><mi>a</mi><mi>s</mi><mi>h</mi></mrow><annotation encoding="application/x-tex">hash</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.69444em;"></span><span class="strut bottom" style="height:0.69444em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord mathit">h</span><span class="mord mathit">a</span><span class="mord mathit">s</span><span class="mord mathit">h</span></span></span></span>后的结果对缓存服务器的数量进行取模操作，通过取模后的结果，决定缓存项存在哪台服务器上。举例，假设使用图片名作为访问图片的<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>k</mi><mi>e</mi><mi>y</mi></mrow><annotation encoding="application/x-tex">key</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.69444em;"></span><span class="strut bottom" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.03148em;">k</span><span class="mord mathit">e</span><span class="mord mathit" style="margin-right:0.03588em;">y</span></span></span></span>，假设图片名不重复，则用以下公式进行计算，得到最终存放的服务器编号</p> <p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>s</mi><mi>e</mi><mi>r</mi><mi>v</mi><mi>e</mi><mi>r</mi><mo>=</mo><mi>h</mi><mi>a</mi><mi>s</mi><mi>h</mi><mo>(</mo><mi>N</mi><mi>u</mi><mi>m</mi><mi>b</mi><mi>e</mi><mi>r</mi><mspace width="0.22222em"></mspace><mi>o</mi><mi>f</mi><mspace width="0.22222em"></mspace><mi>S</mi><mi>e</mi><mi>r</mi><mi>v</mi><mi>e</mi><mi>r</mi><mi>s</mi><mo>)</mo><mspace width="0.22222em"></mspace><mi mathvariant="normal">%</mi><mspace width="0.22222em"></mspace><mi>N</mi></mrow><annotation encoding="application/x-tex">server = hash(Number \: of \: Servers) \: \% \: N
</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base displaystyle textstyle uncramped"><span class="mord mathit">s</span><span class="mord mathit">e</span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mord mathit" style="margin-right:0.03588em;">v</span><span class="mord mathit">e</span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mrel">=</span><span class="mord mathit">h</span><span class="mord mathit">a</span><span class="mord mathit">s</span><span class="mord mathit">h</span><span class="mopen">(</span><span class="mord mathit" style="margin-right:0.10903em;">N</span><span class="mord mathit">u</span><span class="mord mathit">m</span><span class="mord mathit">b</span><span class="mord mathit">e</span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mord mspace mediumspace"></span><span class="mord mathit">o</span><span class="mord mathit" style="margin-right:0.10764em;">f</span><span class="mord mspace mediumspace"></span><span class="mord mathit" style="margin-right:0.05764em;">S</span><span class="mord mathit">e</span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mord mathit" style="margin-right:0.03588em;">v</span><span class="mord mathit">e</span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mord mathit">s</span><span class="mclose">)</span><span class="mord mspace mediumspace"></span><span class="mord mathrm">%</span><span class="mord mspace mediumspace"></span><span class="mord mathit" style="margin-right:0.10903em;">N</span></span></span></span></span></p> <p>因为图片名不重复，因此得到的结果是一定的。因此要访问某张图片，只需要按上述公式进行计算，然后去对应的服务器找即可，如果没找到，说明图片没有被缓存，也不用遍历其他服务器了，称这种方法为<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>H</mi><mi>a</mi><mi>s</mi><mi>h</mi></mrow><annotation encoding="application/x-tex">Hash</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.69444em;"></span><span class="strut bottom" style="height:0.69444em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.08125em;">H</span><span class="mord mathit">a</span><span class="mord mathit">s</span><span class="mord mathit">h</span></span></span></span>算法。</p> <p><strong>但是</strong></p> <p>使用<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>h</mi><mi>a</mi><mi>s</mi><mi>h</mi></mrow><annotation encoding="application/x-tex">hash</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.69444em;"></span><span class="strut bottom" style="height:0.69444em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord mathit">h</span><span class="mord mathit">a</span><span class="mord mathit">s</span><span class="mord mathit">h</span></span></span></span>算法进行缓存时，会出现一些<u>缺陷</u>。</p> <p>例如，当三台服务器不能满足要求时，需要增加新的服务器进来，但是增加后，服务器的数量发生变化，就需要重新进行一次<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>h</mi><mi>a</mi><mi>s</mi><mi>h</mi></mrow><annotation encoding="application/x-tex">hash</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.69444em;"></span><span class="strut bottom" style="height:0.69444em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord mathit">h</span><span class="mord mathit">a</span><span class="mord mathit">s</span><span class="mord mathit">h</span></span></span></span>计算，在这期间，缓存是失效的；同理，当某台服务器故障时，需要将其移出，则图片缓存的位置必然发生改变，因此以前缓存的图片也会失去缓存的作用和意义，由于大量缓存在同一时间失效，会造成缓存雪崩。</p> <p>总结一下，普通<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>h</mi><mi>a</mi><mi>s</mi><mi>h</mi></mrow><annotation encoding="application/x-tex">hash</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.69444em;"></span><span class="strut bottom" style="height:0.69444em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord mathit">h</span><span class="mord mathit">a</span><span class="mord mathit">s</span><span class="mord mathit">h</span></span></span></span>算法会出现以下问题：</p> <ul><li>当缓存服务器数量发生变化时，会造成缓存雪崩，引起整个系统压力过大而崩溃？</li> <li>当缓存服务器数量发生变化时，几乎所有缓存的位置都会发生改变，如何减少受影响的缓存？</li></ul> <h2 id="一致性哈希"><a href="#一致性哈希" class="header-anchor">#</a> 一致性哈希</h2> <h3 id="基本原理"><a href="#基本原理" class="header-anchor">#</a> 基本原理</h3> <p>一致性<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>h</mi><mi>a</mi><mi>s</mi><mi>h</mi></mrow><annotation encoding="application/x-tex">hash</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.69444em;"></span><span class="strut bottom" style="height:0.69444em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord mathit">h</span><span class="mord mathit">a</span><span class="mord mathit">s</span><span class="mord mathit">h</span></span></span></span>也是使用取模的方法，只不过，刚才描述的取模方法是对服务器数量取模，而一致性哈希是对<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msup><mn>2</mn><mrow><mn>3</mn><mn>2</mn></mrow></msup></mrow><annotation encoding="application/x-tex">2^{32}</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.8141079999999999em;"></span><span class="strut bottom" style="height:0.8141079999999999em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord"><span class="mord mathrm">2</span><span class="vlist"><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord mathrm">3</span><span class="mord mathrm">2</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span></span></span></span>取模。</p> <p>首先，将<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msup><mn>2</mn><mrow><mn>3</mn><mn>2</mn></mrow></msup></mrow><annotation encoding="application/x-tex">2^{32}</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.8141079999999999em;"></span><span class="strut bottom" style="height:0.8141079999999999em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord"><span class="mord mathrm">2</span><span class="vlist"><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord mathrm">3</span><span class="mord mathrm">2</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span></span></span></span>想像成一个圆，圆的正上方代表<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>0</mn></mrow><annotation encoding="application/x-tex">0</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.64444em;"></span><span class="strut bottom" style="height:0.64444em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord mathrm">0</span></span></span></span>，按照顺时针方向，下面的点依次为1、2、3、4...，一直到<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msup><mn>2</mn><mrow><mn>3</mn><mn>2</mn></mrow></msup></mrow><annotation encoding="application/x-tex">2^{32}</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.8141079999999999em;"></span><span class="strut bottom" style="height:0.8141079999999999em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord"><span class="mord mathrm">2</span><span class="vlist"><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord mathrm">3</span><span class="mord mathrm">2</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span></span></span></span>，也就是0左边的第一个点为<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msup><mn>2</mn><mrow><mn>3</mn><mn>2</mn></mrow></msup><mo>−</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">2^{32}-1</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.8141079999999999em;"></span><span class="strut bottom" style="height:0.897438em;vertical-align:-0.08333em;"></span><span class="base textstyle uncramped"><span class="mord"><span class="mord mathrm">2</span><span class="vlist"><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord mathrm">3</span><span class="mord mathrm">2</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span><span class="mbin">−</span><span class="mord mathrm">1</span></span></span></span>，将这个环称为<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>H</mi><mi>a</mi><mi>s</mi><mi>h</mi></mrow><annotation encoding="application/x-tex">Hash</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.69444em;"></span><span class="strut bottom" style="height:0.69444em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.08125em;">H</span><span class="mord mathit">a</span><span class="mord mathit">s</span><span class="mord mathit">h</span></span></span></span>环。</p> <div align="center"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADHCAYAAABcDhxLAAABfGlDQ1BJQ0MgUHJvZmlsZQAAKJFjYGAqSSwoyGFhYGDIzSspCnJ3UoiIjFJgv8PAzcDDIMRgxSCemFxc4BgQ4MOAE3y7xsAIoi/rgsxK8/x506a1fP4WNq+ZclYlOrj1gQF3SmpxMgMDIweQnZxSnJwLZOcA2TrJBUUlQPYMIFu3vKQAxD4BZIsUAR0IZN8BsdMh7A8gdhKYzcQCVhMS5AxkSwDZAkkQtgaInQ5hW4DYyRmJKUC2B8guiBvAgNPDRcHcwFLXkYC7SQa5OaUwO0ChxZOaFxoMcgcQyzB4MLgwKDCYMxgwWDLoMjiWpFaUgBQ65xdUFmWmZ5QoOAJDNlXBOT+3oLQktUhHwTMvWU9HwcjA0ACkDhRnEKM/B4FNZxQ7jxDLX8jAYKnMwMDcgxBLmsbAsH0PA4PEKYSYyjwGBn5rBoZt5woSixLhDmf8xkKIX5xmbARh8zgxMLDe+///sxoDA/skBoa/E////73o//+/i4H2A+PsQA4AJHdp4IxrEg8AABqMSURBVHgB7V0JdFXVuf5CwpwQAggIgQSUoAgIKJagVRR8ijgAygLtq1OHp3229fW91qF12bra2kpXX9vlslq1VftkoSCDdXguUNBHIYiKgDIrCRDmISERkPH9X/Y9BBK43pBz9tnn3P9f655z7znn7uHb+zt7+v9/ZxwVgYoioAicFIEmJ72qFxUBRaAGASWIVgRFIAkCSpAk4OgtRUAJonVAEUiCgBIkCTh6SxHIUgjCRaCsrAwzZsxAVlYWxowZgy5duoSbII39BAS0BTkBDrs/5s6di4kTJ+KWW27BjTfeiEceeQSLFi2ymwiNLSkCGboOkhSfwG5u3LgRw4cPx5IlS9CiRYuaeKqrqzFo0CDMnz8fHTp0CCxuDTh1BLQFSR0rX5984oknMHDgwGPkYODZ2dkoKirC008/7WtcGtjpI6AEOX3sTvufVF4gCUiQusJrTz31VN3L+jskBJQgIQC/ZcsW7NixA3l5efVib9euHThw37NnT717esE+AkoQ+5hj3bp1NbHm5OTUi9275j1T7wG9YBUBJYhVuE1klZWVNV+aNm1aL3bvmrYg9aAJ5YISJATYCwoKamI9GQk4k0Xp3r17zVkP4SKgBAkB/8LCQmRkZKCioqJe7FVVVWArkp+fX++eXrCPgBLEPuZo1aoVRowYgZUrV9aLvbS0FKNGjUJmZma9e3rBPgJKEPuY18R47733Ys6cOfViLykpwT333FPvul4IBwElSDi4Y+TIkSguLsbkyZOPpWDWrFkYPHhwzQr7sYv6JVQEVNUkRPgPHz5co3/Fc5MmTWpW1e+77z7tXoVYJnWjVoLURSSE30eOHKmJlSRRcQsBJYhb5aGpcQwBfWU5ViCaHLcQUIK4VR6aGscQUII4ViCaHLcQUIK4VR6aGscQUII4ViCaHLcQUIK4VR6aGscQUII4ViCaHLcQULc/QZTHl2INuHMFUFkG7OFnA1C9Cdi3C9if+BzcCxw+YD5HDgJNxDYks5n5NG0FtGhnPi3bi7H6mUAbUX/PFTX5NvJpfw7QvE0QKdcw6yCgC4V1AGnwzyqp+JtKgM3vA9uWAjs+AarKGxxMg/+QI+rwZ/SVT3+gy9fkM0SI1LnBwegfkiOgBEmOT/271ZuB0lnAutnAhneFDBvrP9O0JZDXG2jbM/Hml7d/dleArUHLRMvQtHVti8HWg62I16Ic/MK0NPt2mlaHcexZbz4VnwO7VgGH9tePl61Mt8uAHiOAAvkoYepj1MArSpBUANu2BFg1DVgzA9guLcTxwq7OmYk3eGfxUtJB3uptewAZAQ7vjh4Bdn8mrdWnwJaPaluwA1XHp8y0LkWjgd5j5Xu/E+/pr5QQUIKcCqZda4BlzwMrRB29cl3tU82y5S19KVB4pbylhwsh+ggZMmrvh/WNpCFhSt+Wj7RuG98DDkhL5Enbs4BzJwD9bpPWTb6rpISAEuR4mA7uA5ZPEmI8B5TPr73TuhPQK/EmZhcmU7pErgu7a2VzgNXTTcu3d3ttivMvAfrfYQiT1aL2un6rh4AShJBwlumjJ4Alz5i+P681E5c8vW+SN+6tACtUkF0mxheksHXZIC3KshekqzgV4BiHwjHR+d8FBt0N5MgYSaUeAulNkJ0rgfm/Ala+LIPkQwYczggNvAsoulFIIgPpuMkB8Zqycgqw+EkZv3xgcsdJgj43A8UPAu16xS3HjcpPehJkx/JaYvDtyi4TCXHhD2W69KJGARqpP5cvAD74k3TDZAKCL4iMTNPtGvpTWWuRWTgVpBdBqrcA8x4Glv4NOHrYTLP2k7548f1mOjZdK0RlKbDgUeATmZQ4LNPNJMqA7wAXC1atO6YrKjX5Tg+CcM3g/d8BJROl/y1dDLYY/b8NDCEx8tO6ApyQea61kChL/2palGYyhT3kJ8DgHwFZzU94NF1+xJ8gnPJ863tAhawbUHrdAAz7jfS1i8xvPdZHgGOzOUKMz14394jVVX8Wd4/D6j8b8yvxJcjeHcDb8uZb/qIpwg7nAf/yuFnDiHmh+pa9sneAWd8XvTIhDKXvbcAV0hJTGyBNJJ4E4ZvvDelD790qXQNR+7j4Z9JN+M9orF+4VvG4nrLwMdP1YleVipMjnwV6XuVaSgNJT7wIwpXjOf8FfPwXAxa7BCOfMaofgcCXRoHuXisvnW/JCv08ybRoDgySbuuw3wLUO4uxxIcg7AZMl6lanjNlQHnpL6XV+A8pSylMFX8Q4JT4QpnomPdzo1hJbeLRU2O9dhIPgqyQhb43pUvFGSqONa6fZFTB/akWGkpdBLZ+DLx6i9Eq5kzXKJn1KhpT96lY/I42QfhGm3MfsOj3pjD6SKFd/ZQ0+61iUThOZ4Ir8m/KVDlX5SmcMmerHbMWO7oEoUXeP/5VFPFmmgU/zq4M+ndTWHq0h8CiPwBz5SXFlXjqrl0ri40xUoCMJkG4Iv7K9aJL9KGZcmQ/uPtl9iqFxnQiAlSxnzEO+LLSWDeOnRGbFfjoEaRiHTD5SmOjQYu9cTKlq4t+J1bYMH5Rv23KtaIZXSb2JmcDE2aLlkK3MFLia5zRIshOMTWdPMI4QDhzMHDTa0CrDr4CooE1AoEvtglJrgG2LjbkIElIlghLdAhChwgvyeLUXikEWvTd+Kp49hCbDRW3EGA3iy0JDc5ad5aWZJaxunQrlSmnJhoEYcsxaZghR8+rzdx7zBeoUi5BFx/kgu00mfYtk7FJa1l5/8bcyLYk7hOEY44XpcWo3iTqDUKOsWJCSv9RKm4jcOhLYOp1hiT0tvINsWiM4JikidMoc7aKA3KSg90qzlYpOZwusmOJo3o8X2Zdi427Io4dj7eLP/ag21/cJQjXOTiVS48iHJBzzKHdKrdrU93U0WSZs4ydBoqborVSnmJqQIXHCImbBOEKORcBuc7BqVzOVumAPELV6rikNs81JKHL1E0LgdduE2vOo8c94PZXNwlC9RGukNPugG8gncp1uxZ9VeroNmkcX3JCFnpVee+hr/qHM/fdIwgVD6lbxbFGjaZokTNgaUIagQAd7I2Wsm2SJabPj4qjCFltj4C4RRCqqlMrl0LdKlUfMVjE5VgoA3WaO1PeuNOMS8wvZ4/uEIRz57TnoMo6tXJV8dDZStOohNFGh0qNXFCcLmfHB+3uEISWgGxBaM9BlXWV+CJAK0/qz21fJprA9zudTzcIQhtymsnSEpDGTmrP4XSlaXTiOCPJcqb7pQ8fl60kRB3FUQmfIPQ+QgcLFBrc0IxTJf4IcG2EjukgU74cj+zf7WSewycIXfPQ+0j3YcaG3EmYNFGBIDBEpvO7DjWaEu/8OJAoGhtouAShUzf6raJrHvZLY2au2djCif3/6TH/mmdN13rZc8YDvWOZDo8gnL2gx0MK/VZxVyaV9EOAg3X6RmZX6627jbcUh1AIjyB0H0N3oJy1olM3lfRFgA4f2vU2s5i0cXdIwiEItXQXykIghe5Ao7Bjk0mtHoNAgFoTI/5oQi6RhURO3Dgi4RCEWxBwQZCOpKnGrqII9LjS2PtwAXHeL5zBwz5BaNzP/TnYanhqB87AoQkJFYFhj4muluxNskTWxLiJqgNinyDzZa2Dm9dwfw4O0FQUAQ+BM2Q82vd242Nrwa+9q6Ge7RKEqiT0xMc+JwdmKopAXQSGPmg0fpdPMnvB171v+bddgnDDTBpD9b9Td3ayXNCRiS63EDjvm4lWRNTiQxZ7BOFWy9xNlmMPrqCqKAKnQqD4ATMW4SIyZzxDFHsE4T7knv9WerlQUQROhUDeWcDZMsPJzXsWP3mqp6xct0OQg/tkZkJUSSgX/MCc9agIJEPgwkQ9+VgIQhdCIYkdgnDAtX+XcWycTvuQh1SosYi229eBjgOMq6BVMrETktghCBXRKAPvMmc9KgKpIODVF66bhSTBE4QLPuXzgWZiJFMkJrUqikCqCJw73mh6r39X/KOVpvovX58LniDLnjcJph0yHYmpKAKpItC8TWJrN9H0XfZCqv/y9bngCbJisklwv1t9TbgGliYI9E3Um5UvhZLhYAmybYlxHUrHYfmXhJJBjTTiCBRcDrQQB4LUwtixwnpmgiXIqmkmQ71Gi7VgsFFZR04jtIMAHc1R65uyOlGfzC8rx2Br7erpJhO9x1rJjEYSUwR6jzEZC8EbY3AEqd4sTeKnMjDPFpuPy2JacpotKwgUDDc753JrN8vGVMERpDTh64jkUItBK/UotpFwW+maMazMZnHXKosSHEHWzTbZoD9WFUWgsQh49YiecCxKcATZIIs7FDaPKopAYxHwCMJFQ4sSDEGqNgFVG81+EHR7r6IINBaBM/qbhWZ6wrE4DgmGIJtKDBxnXqTO4BpbMfT/BgHaqne6wHzfvNAaKsEQZPP7JgNdhljLiEaUBgh49ak86gThCjql80Bz1qMi4AcCnQeZULYv9SO0lMIIpgXh+gelg3pqN0Do0RcE6IWT4tUv8yvQo/8EoeOvqnKzZbP62w208NIu8LxeZk2tolQcD+61kn3/CUKlMkqe+FpV/SuDhR79QYALziQJxDPOrtX+hPkVofhPkMoyEyX3N1dRBPxGILeHCdGSAZX/BNmTIIh6LvG7amh4RKBNgcFhz3orePhPkMpEwnPVtY+VEky3SNp0izhBvhAtXkp2V3PWoyLgJwJt8k1o1Ba3IP63IPt2mWS3bG8h+RpF2iHQIlGv9u20knX/CbI/kfCWYiapogj4jYBXr+hnzYL4TxCvBfGYbiETGkUaIUD7dIpXz8yvwI7+E+TQPpPYpq0CS7QGnMYINE24jjoU1YVCOhymcA8QFUXAbwS8euXVM7/DrxOe/y3I4YSj4czmdaLSn4qADwhEniDc4oBCdy0qioDfCHj1yqtnfodfJzz/W5Amoi9DOXLQnPWoCPiJgEcMjyh+hn2SsPwniOUm8CR50ktxRsAbe3j1LOC8KkECBliD9xmByBPEm949+IXPyGhwioAgcLDawOBN9wYMiv8tiLeQY2mlM2B8NHjXEPAWCL16FnD6giOIJV2ZgPHR4F1DwHvxeionAafPf4J4Sooe0wPOgAafZgh4L97ItiDZZ5oSo+M4FUXAbwTo74CS3cWcAz7634J4loR7NgScdA0+LRHwLAk9w6mAQfCfILmeSWTC9DbgDGjwaYaAZ9Lt1bOAs+8/QTyb4YrPA066Bp+WCFSsM9nOLbSSff8J0v4ck/Bdq4Cj4p5FRRHwC4HDor5UsVZCk2qbV+RXqEnD8Z8g3Lo3R+yGD+0HdosnbhVFwC8E6AuLJKFDwqYt/Qo1aTj+E4TRnZFwOWrRRWTSXOrNeCDg1SfPBamFXAVEkP4m6Vs+spAFjSJtENiaqE8dz7eW5WAI0uVrJgPePiHWsqMRxRqB8sS+M11k3xlLEixBuE+IDtQtFWXMo6EdyNYPTSa9F7CFLAdDEK6mcyHnQJW4ql9uIRsaRewR4J4z9OiedzbgqTNZyHQwBGHCuw0zybe8K6mJVI+xQ8CrR92HWc1acATpMcJkxMuY1WxpZLFDwKtH3m63ljIYHEEKEgTZ+J7MXSdcAVnKlEYTMwQOiq+18n+a/WYKrrCaueAIkt1Z1kP6yThELAvXz7WaKY0sZgiUzZaFZ3En1Un2KLQ4/iCKwRGEoReN4RFYNc2c9agInA4CXv0pGn06/27Uf4IlSO+xJnFrZuh0b6OKKY3/zOndz14zABQl6pNFOIIlCLtYbc8C9m4HNrxnMVsaVWwQKH3bOKru0AdoL/teWpZgCcLMnDvBZGnZC5azptHFAoFPEvXm3PGhZCd4gvS7zWRs1VQZsCdctoSSVY00cghwS3F2z7lbct9bQ0l+8ATJky5W/iWyCiqzWSunhJJJjTSiCCyfbMwmul8umhnh7HkZPEFYNv3vMCW0+MmIlpQmOxQEvPrS//ZQomekdgjCcQjnr7d8IAs+C0LLrEYcIQS4drZ9KdC6E9D7ptASbocgWS2A879rMvnBn0LLrEYcIQS8ejLwrlA3Y7JDEJbLoLulvZKtEVbLomFlaYRKSpNqHYFda4C1/xBiyCZMA4QgIYo9guR0BfrcLPuGyMLPgkdDzLJG7TwCC35tFpb7flO6WB1DTa49gjCbxQ/KlF0m8MnzgOcALNTsa+TOIUBHH8snSW8jS+rLA6Enzy5B2vUyC4f0TKGtSOiF72QC5v/K9DLOk9YjtzD0JNolCLM79KemFVn6V2DnytAB0AQ4hMD2ZcCnfzdj1aHS23BA7BOE+jQDvmPeEnN+4gAEmgRnEHjnx2bsMVAmdNr2dCJZ9gnCbF/8MNAsR7Q0XwfK3nECCE1EyAh8/r9A6SygRZ7Uj4dCTkxt9OEQhDMTQ+4zqZj1fbU4rC2P9PxGL5yzf2jyzokcS5vjpAJ2OARhygb/CGgn/lU5Dln4WCpp1WfiigAnbHavBegx8QJ5YTok4REkSxaBrvqzgcIDyCFgNCmWENixIvGCzJD68KQsDspiskMSHkEIQvdhosYs6vBsYt/4llodOlQxrCTlyGHgTSl3OvU4/9ui9T3USrQNiSRcgjClV/xOttMSR3Mb58mbZGJD0q7PRh0BrphvWmh2A7j8t07mJnyCcEA28lkBR5rYeT8X95IfOwmUJspnBDaLZvf8X0qgUu6jngOa5/ocgT/BhU8Q5qPnVaLM+D3T1L56i1oe+lO27oZCS0GWM/XyBt8LFFzubFrdIAjhGSZNLPcV4c5Ub0p/VCW+CLx+h+wU9RnQcQBwqaiWOCzuEIQ7Bo2eKguIbYxp7qI/OAybJu20ESiRKf01M82C4Bgpb85mOizuEIQgUZlxlOhoUebKQiJdvqjEBwGulv/fzyQ/Mu649nmzlZrjuXOLIASL3hiH3G/6pzPG6fYJjleglJO3TcxnZ06QcpWpXaqSnDUq5b+G+WDGUZEwE3DSuJmkmePFZekr4s2iALi1JHTDmZOmUy+mhkD1ZuDvxWIDtMEYzV33P6n9z4Gn3GtBCEoGm+AXAO4kxI3jp1wDcOZDJXoI7N8NvDzSkCP/4sSUfnSy4SZBiB8dPYydYXYU2rpYSHKt8RQfHWw1pV/KDmMkB+082p8j5Tnd+UF53UJzlyBMKbV+J8w227mVzwemyfiEbvBV3EeAe3q8cj2weZFYBvYAxosqu+WtC/wAyW2CMIfc65Akad1ZbEdkVmvqddqS+FHyQYbBloPdYjosz+4C3CzllyPnCIr7BCGo3LhxgryBWovOFknysqy865jEzerGMcdLVx5HDikvB2zLTxcsN2exTpUb2gxMFvDpEaXTQGCcWCTS856KGwhwtsobc7BbxZdaWzlHWKJFEALNqcLJI4yBDaeAx8nmKtw7QiVcBLjOwTEHy4cDco45ItqtOh7I6BGEqeeGPK/cYFSlqQU6+mXA8u6nx4OY9t+5Qs5FwAMy9uBULmerIjggP1k5RmMMUjflrc6QgZ84e6BTY45Fpsiq7KL/rvuU/raBAHWr2HKQHPScGdHZqlNBFc0WxMsNV9zfewgoedRcIWFGPiO2BTneE3oOCgG+mKiVu2amxJBh1EcueTio2EILN9oE8WBbLQuKb9xpWhM6grh+khnEe/f17C8CNHaiPQdV1ummh4qHEdGtaigQ8SAIc80ZrunSgnDVlob/9L1F10LcvkvFHwSoaEgzWVoC0tiJ9hxUWY/4TFUycOJDEOaSq7fvPgB8+Lj8kO5X16HANc8a90LJUNB7X40AvY/QwQJtyNmloiUgjZ0ct+f46owlfyJeBPHyuk6mGNnlqt5k9pgovt+o0Gc2857Qc6oI0OMM3TLRdxm9j+TkGxtyh81kU81aKs/FkyDMOVd06et12XPyQ1qTdr2BEX8EeshCo0pqCHD6lh4P2X1lq0HXPPQ+4qiDhdQy1bCn4ksQDwfqA711d60n+Z5XSyFP1MVFD5+TnTmO48uFvnIp9HhIp24O+q0yCQzuGH+CEDt2DWjjXvIbM9PVJFMc1t0uWzE8GGk9Id+rBTev4f4c3ILg6BEzQ1UsGNEdqGMeD33P+ykCTA+CeJnfu0N8b/0CWPIXMwvTJAvgRi3cyYj7uaercE9Azk5xZyfOTnEvSW5BQNNYhxxJh1E86UUQD+F6FUJalLNvAC78AdDt695T8T+vnwtwN1lumMkWw3thsGV1ZH+OsAshPQnioc4uBWdolr9oumG8Ti3hAf8mW8WNl8FoG+/J+Jy5Ar58MrBYxhTch5yS2Vy6nImWNLew5pIeDALpTRCvFlRvMRXmY6k0VISkZLUUDytjgX63GifbfLtGVdhtogulT14Q1RDROuDULYWmAtyHnFsth7ybrEmQe0clyPFlQnPeVVOApX8D1r8rd2R6mNKiHdBLumC9x4ibzOHGXt7ccffIRdOy2ZKfabKT12vAvl0mrdQs6H450P92o+ypa0NJy1AJcip4KktlDUXeuCtfqp0i5rN0JpF/CWrU6wtHiLvU/tJ3lzFM2MJWYtsSaSmEFPyU//NE+33azLDb2FdaxDbdw05tZOJXgqRSVFSzWP2KfGaK9/nF8o9Ey8L/Nmst45YLxEXREKDzILNmkNcr2GlRbqO9a7U41ftU0vORkKFEzh+Kqs3e2tywpegk6SkabbqK3DxVpcEIKEEaChmnimkXz7c0u2HUaK0rXDMgSWh2SqvHXHlj53SVrlp7M23KLltTIRa7N/xwfMMWgOs1/Bz8QrpEO0UbQLpFPFeVGzNj+girWCeftfKckKSu0Ha/22WJ1k26gjExWqqbTZu/lSCNRZuE2bxQ3uLy4awQ3+oVpRLqkcaGnOT/0jpQg5Yr3B3Pl9brIuNkTwmRBLPTu6UEOT3ckv+LXR12gTiOoYMJfujQ4FirIC3DIXnGazFqFuekFfFalKxWpqVhhWdrQ9c5dH+Uy9aoUFqnImmBZJZNJXAElCCBQ6wRRBkBaatVFAFF4FQIKEFOhYxeVwQEASWIVgNFIAkCSpAk4OgtRUAJonVAEUiCgBIkCTh6SxFQgmgdUASSIKAESQKO3lIElCBaBxSBJAgoQZKAo7cUASWI1gFFIAkCSpAk4OgtRUAJonVAEUiCgBIkCTh6SxH4f0p3D42RjBx0AAAAAElFTkSuQmCC" width="20%" height="20%" alt="图片名称"></div> <p>一致性哈希与<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>H</mi><mi>a</mi><mi>s</mi><mi>h</mi></mrow><annotation encoding="application/x-tex">Hash</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.69444em;"></span><span class="strut bottom" style="height:0.69444em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.08125em;">H</span><span class="mord mathit">a</span><span class="mord mathit">s</span><span class="mord mathit">h</span></span></span></span>环有什么关系呢？</p> <p>同样是上面的问题，假设有3台服务器A、B、C，在生产环境中，这三台服务器肯定有自己的<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>I</mi><mi>P</mi></mrow><annotation encoding="application/x-tex">IP</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.68333em;"></span><span class="strut bottom" style="height:0.68333em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.07847em;">I</span><span class="mord mathit" style="margin-right:0.13889em;">P</span></span></span></span>地址，所以我们使用它们各自的<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>I</mi><mi>P</mi></mrow><annotation encoding="application/x-tex">IP</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.68333em;"></span><span class="strut bottom" style="height:0.68333em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.07847em;">I</span><span class="mord mathit" style="margin-right:0.13889em;">P</span></span></span></span>地址进行哈希运算，使用后的结果对<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msup><mn>2</mn><mrow><mn>3</mn><mn>2</mn></mrow></msup></mrow><annotation encoding="application/x-tex">2^{32}</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.8141079999999999em;"></span><span class="strut bottom" style="height:0.8141079999999999em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord"><span class="mord mathrm">2</span><span class="vlist"><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord mathrm">3</span><span class="mord mathrm">2</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span></span></span></span>取模，公式为</p> <p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>s</mi><mi>e</mi><mi>r</mi><mi>v</mi><mi>e</mi><mi>r</mi><mo>=</mo><mi>h</mi><mi>a</mi><mi>s</mi><mi>h</mi><mo>(</mo><mi>I</mi><mi>P</mi><mo>)</mo><mspace width="0.22222em"></mspace><mi mathvariant="normal">%</mi><mspace width="0.22222em"></mspace><msup><mn>2</mn><mrow><mn>3</mn><mn>2</mn></mrow></msup></mrow><annotation encoding="application/x-tex">server = hash(IP) \: \% \: 2^{32}
</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.8641079999999999em;"></span><span class="strut bottom" style="height:1.1141079999999999em;vertical-align:-0.25em;"></span><span class="base displaystyle textstyle uncramped"><span class="mord mathit">s</span><span class="mord mathit">e</span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mord mathit" style="margin-right:0.03588em;">v</span><span class="mord mathit">e</span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mrel">=</span><span class="mord mathit">h</span><span class="mord mathit">a</span><span class="mord mathit">s</span><span class="mord mathit">h</span><span class="mopen">(</span><span class="mord mathit" style="margin-right:0.07847em;">I</span><span class="mord mathit" style="margin-right:0.13889em;">P</span><span class="mclose">)</span><span class="mord mspace mediumspace"></span><span class="mord mathrm">%</span><span class="mord mspace mediumspace"></span><span class="mord"><span class="mord mathrm">2</span><span class="vlist"><span style="top:-0.413em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord mathrm">3</span><span class="mord mathrm">2</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span></span></span></span></span></p> <p>通过以上公式计算出的结果肯定是<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>0</mn></mrow><annotation encoding="application/x-tex">0</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.64444em;"></span><span class="strut bottom" style="height:0.64444em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord mathrm">0</span></span></span></span>到<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msup><mn>2</mn><mrow><mn>3</mn><mn>2</mn></mrow></msup><mo>−</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">2^{32}-1</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.8141079999999999em;"></span><span class="strut bottom" style="height:0.897438em;vertical-align:-0.08333em;"></span><span class="base textstyle uncramped"><span class="mord"><span class="mord mathrm">2</span><span class="vlist"><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord mathrm">3</span><span class="mord mathrm">2</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span><span class="mbin">−</span><span class="mord mathrm">1</span></span></span></span>中的一个整数，我们就用这个数，代表服务器<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>A</mi></mrow><annotation encoding="application/x-tex">A</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.68333em;"></span><span class="strut bottom" style="height:0.68333em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord mathit">A</span></span></span></span>，由于该整数范围为<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>0</mn></mrow><annotation encoding="application/x-tex">0</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.64444em;"></span><span class="strut bottom" style="height:0.64444em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord mathrm">0</span></span></span></span>到<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msup><mn>2</mn><mrow><mn>3</mn><mn>2</mn></mrow></msup><mo>−</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">2^{32}-1</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.8141079999999999em;"></span><span class="strut bottom" style="height:0.897438em;vertical-align:-0.08333em;"></span><span class="base textstyle uncramped"><span class="mord"><span class="mord mathrm">2</span><span class="vlist"><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord mathrm">3</span><span class="mord mathrm">2</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span><span class="mbin">−</span><span class="mord mathrm">1</span></span></span></span>，所以上面的<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>H</mi><mi>a</mi><mi>s</mi><mi>h</mi></mrow><annotation encoding="application/x-tex">Hash</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.69444em;"></span><span class="strut bottom" style="height:0.69444em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.08125em;">H</span><span class="mord mathit">a</span><span class="mord mathit">s</span><span class="mord mathit">h</span></span></span></span>环上一定有一个点与之对应。</p> <div align="center"><img src="data:image/png;base64,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" width="25%" height="25%" alt="图片名称"></div> <p>同理，服务器<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>B</mi></mrow><annotation encoding="application/x-tex">B</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.68333em;"></span><span class="strut bottom" style="height:0.68333em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.05017em;">B</span></span></span></span>和服务器<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>C</mi></mrow><annotation encoding="application/x-tex">C</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.68333em;"></span><span class="strut bottom" style="height:0.68333em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.07153em;">C</span></span></span></span>都可以通过上面的方法映射到<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>H</mi><mi>a</mi><mi>s</mi><mi>h</mi></mrow><annotation encoding="application/x-tex">Hash</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.69444em;"></span><span class="strut bottom" style="height:0.69444em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.08125em;">H</span><span class="mord mathit">a</span><span class="mord mathit">s</span><span class="mord mathit">h</span></span></span></span>环上。</p> <p>到目前为止，三台服务器都可以映射到<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>H</mi><mi>a</mi><mi>s</mi><mi>h</mi></mrow><annotation encoding="application/x-tex">Hash</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.69444em;"></span><span class="strut bottom" style="height:0.69444em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.08125em;">H</span><span class="mord mathit">a</span><span class="mord mathit">s</span><span class="mord mathit">h</span></span></span></span>环上。</p> <p>利用同样的方法，也可以将要缓存的图片的<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>k</mi><mi>e</mi><mi>y</mi></mrow><annotation encoding="application/x-tex">key</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.69444em;"></span><span class="strut bottom" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.03148em;">k</span><span class="mord mathit">e</span><span class="mord mathit" style="margin-right:0.03588em;">y</span></span></span></span>映射到<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>H</mi><mi>a</mi><mi>s</mi><mi>h</mi></mrow><annotation encoding="application/x-tex">Hash</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.69444em;"></span><span class="strut bottom" style="height:0.69444em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.08125em;">H</span><span class="mord mathit">a</span><span class="mord mathit">s</span><span class="mord mathit">h</span></span></span></span>环上（图中的点）。</p> <div align="center"><img src="/assets/img/CA1E1BC8-55FC-4EF2-8852-C6CDAA4D55D9.900960b8.png" width="30%" height="30%" alt="图片名称"></div> <p>那么上图中，图片应该映射到哪台服务器上呢？我们将点顺时针移动，碰到的第一个服务器即为缓存的服务器，即缓存到服务器<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>B</mi></mrow><annotation encoding="application/x-tex">B</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.68333em;"></span><span class="strut bottom" style="height:0.68333em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.05017em;">B</span></span></span></span>上。</p> <div align="center"><img src="/assets/img/C2C3D030-EA28-4F09-9406-2DC60271B37B.320263d2.png" width="30%" height="30%" alt="图片名称"></div> <p>经过上述描述，应该可以明白一致性哈希的原理了。</p> <h3 id="一致性哈希的优点"><a href="#一致性哈希的优点" class="header-anchor">#</a> 一致性哈希的优点</h3> <p>但是，一致性哈希能解决先前的问题吗？</p> <p>当某个节点发生故障时，将该节点进行移除，移除后，缓存到这个服务器的图片会顺应缓存到下一个服务器，但是其他图片不会受到影响，仍然缓存在原来的服务器中，这就是一致性哈希的优点。</p> <p>如果使用原来的哈希算法，服务器数量发生改变时，所以的服务器缓存都在同一时间失效了，而使用一致性哈希时，只有部分缓存会失效，前端的缓存仍然能分担整个系统的压力，而不至于所有压力都到后端服务器上。</p> <h3 id="哈希环的倾斜"><a href="#哈希环的倾斜" class="header-anchor">#</a> 哈希环的倾斜</h3> <p>在理想状态下，三台服务器的位置应该是均匀分布的</p> <div align="center"><img src="/assets/img/D07BD506-BBCC-466B-96E7-792BB91FD489.fb192156.png" width="30%" height="30%" alt="图片名称"></div> <p>这样的话，缓存会均匀分布在三台服务器上，但实际情况却不一定是这样。</p> <p>如果出现下面的情况</p> <div align="center"><img src="/assets/img/BA07D38A-66FB-434C-9ACF-3145E238C2C5.cdd5ea4c.png" width="25%" height="25%" alt="图片名称"></div> <p>某一台服务器会承担很大的压力，这种情况叫<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>H</mi><mi>a</mi><mi>s</mi><mi>h</mi></mrow><annotation encoding="application/x-tex">Hash</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.69444em;"></span><span class="strut bottom" style="height:0.69444em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.08125em;">H</span><span class="mord mathit">a</span><span class="mord mathit">s</span><span class="mord mathit">h</span></span></span></span>环的偏斜。</p> <h3 id="虚拟节点"><a href="#虚拟节点" class="header-anchor">#</a> 虚拟节点</h3> <p>如何预防哈希偏斜呢？</p> <p>就是虚拟出多个节点，一个真实的服务器在哈希环上虚拟出多个位置来</p> <div align="center"><img src="/assets/img/11EE16FB-6432-4E9F-9F86-14DCE3B7A35E.817c4002.png" width="30%" height="30%" alt="图片名称"></div> <p>这样的话就可以把环上的空白区域分配给各个节点，而不是全给一个节点，可以抵消哈希环偏斜带来的影响，虚拟节点越多，<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>h</mi><mi>a</mi><mi>s</mi><mi>h</mi></mrow><annotation encoding="application/x-tex">hash</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.69444em;"></span><span class="strut bottom" style="height:0.69444em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord mathit">h</span><span class="mord mathit">a</span><span class="mord mathit">s</span><span class="mord mathit">h</span></span></span></span>环上的节点就越多，缓存被均匀分配的概率就会越大！</p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/blog/cookies/新一代低延时网络传输协议QUIC/新一代低延时网络传输协议QUIC.html" class="prev">
        新一代低延时网络传输协议QUIC
      </a></span> <span class="next"><a href="/blog/cookies/distributedSystem/Paxos算法.html">
        Paxos算法
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.acaacfed.js" defer></script><script src="/assets/js/2.858fe96a.js" defer></script><script src="/assets/js/12.a9ef9aaf.js" defer></script>
  </body>
</html>
