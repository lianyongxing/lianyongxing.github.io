(window.webpackJsonp=window.webpackJsonp||[]).push([[43],{397:function(t,s,a){t.exports=a.p+"assets/img/image-20200710145948729.75303575.png"},398:function(t,s,a){t.exports=a.p+"assets/img/image-20200710170640182.41f94115.png"},649:function(t,s,a){"use strict";a.r(s);var i=a(44),e=Object(i.a)({},(function(){var t=this,s=t.$createElement,i=t._self._c||s;return i("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[i("h2",{attrs:{id:"ssd"}},[i("a",{staticClass:"header-anchor",attrs:{href:"#ssd"}},[t._v("#")]),t._v(" SSD")]),t._v(" "),i("h3",{attrs:{id:"框架图"}},[i("a",{staticClass:"header-anchor",attrs:{href:"#框架图"}},[t._v("#")]),t._v(" 框架图")]),t._v(" "),i("div",{attrs:{align:"center"}},[i("img",{attrs:{src:a(397),width:"75%"}})]),t._v(" "),i("ul",[i("li",[t._v("第一个特征层：300x300的图片输入网络，将图像输入到vgg16 backbone中，但是对vgg的部分进行了修改，尺寸38x38")]),t._v(" "),i("li",[t._v("第二个特征层：对第一个特征层做一个全连接，然后再卷积后作为第二个预测特征层，尺寸19x19")]),t._v(" "),i("li",[t._v("第三个特征层：对第二个特征层的输出再通过1x1的卷积层和3x3的卷积层作为第三个预测特征层，尺寸10x10")]),t._v(" "),i("li",[t._v("第四个特征层：同上得到第四个预测特征层，尺寸5x5")]),t._v(" "),i("li",[t._v("第五个特征层：同上得到第五个预测特征层，尺寸3x3")]),t._v(" "),i("li",[t._v("第六个特征层：同上得到第六个预测特征层，尺寸1x1")])]),t._v(" "),i("p",[t._v("更低层的保留的特征是更多的，因此适合检测相对小的特征，而高层特征图往往丢失了很多细节信息，因此适合检测相对大的目标")]),t._v(" "),i("div",{attrs:{align:"center"}},[i("img",{attrs:{src:a(398),width:"70%"}})]),t._v(" "),i("p",[t._v("如图，b图中保留的特征更多，因此适合检测小目标；c图中保留信息较少，适合检测大目标，特征图上的框框就是Default box，类似于anchor box")]),t._v(" "),i("p",[t._v("在这6个特征层上分别预测不同尺度和比例的目标，最终通过极大值抑制，去除重叠目标")]),t._v(" "),i("h3",{attrs:{id:"predictor"}},[i("a",{staticClass:"header-anchor",attrs:{href:"#predictor"}},[t._v("#")]),t._v(" Predictor")]),t._v(" "),i("p",[t._v("使用predictor在6个特征图上进行预测对于"),i("span",{staticClass:"katex"},[i("span",{staticClass:"katex-mathml"},[i("math",[i("semantics",[i("mrow",[i("mi",[t._v("m")]),i("mo",[t._v("∗")]),i("mi",[t._v("n")]),i("mo",[t._v("∗")]),i("mi",[t._v("p")])],1),i("annotation",{attrs:{encoding:"application/x-tex"}},[t._v("m*n*p")])],1)],1)],1),i("span",{staticClass:"katex-html",attrs:{"aria-hidden":"true"}},[i("span",{staticClass:"strut",staticStyle:{height:"0.46528em"}}),i("span",{staticClass:"strut bottom",staticStyle:{height:"0.6597200000000001em","vertical-align":"-0.19444em"}}),i("span",{staticClass:"base textstyle uncramped"},[i("span",{staticClass:"mord mathit"},[t._v("m")]),i("span",{staticClass:"mbin"},[t._v("∗")]),i("span",{staticClass:"mord mathit"},[t._v("n")]),i("span",{staticClass:"mbin"},[t._v("∗")]),i("span",{staticClass:"mord mathit"},[t._v("p")])])])]),t._v("的特征层，直接用"),i("span",{staticClass:"katex"},[i("span",{staticClass:"katex-mathml"},[i("math",[i("semantics",[i("mrow",[i("mn",[t._v("3")]),i("mo",[t._v("∗")]),i("mn",[t._v("3")]),i("mo",[t._v("∗")]),i("mi",[t._v("p")])],1),i("annotation",{attrs:{encoding:"application/x-tex"}},[t._v("3*3*p")])],1)],1)],1),i("span",{staticClass:"katex-html",attrs:{"aria-hidden":"true"}},[i("span",{staticClass:"strut",staticStyle:{height:"0.64444em"}}),i("span",{staticClass:"strut bottom",staticStyle:{height:"0.8388800000000001em","vertical-align":"-0.19444em"}}),i("span",{staticClass:"base textstyle uncramped"},[i("span",{staticClass:"mord mathrm"},[t._v("3")]),i("span",{staticClass:"mbin"},[t._v("∗")]),i("span",{staticClass:"mord mathrm"},[t._v("3")]),i("span",{staticClass:"mbin"},[t._v("∗")]),i("span",{staticClass:"mord mathit"},[t._v("p")])])])]),t._v("的卷积核进行实现，通过这个东西来生成分类得分和坐标偏移量（跟Faster rcnn的预测器近似一样）。对于特征图上每个位置，会生成k个defaultbox，对每个defaultbox都需要c个分类类别和4个坐标偏移量，因此需要（c+4）k个卷积核来进行预测，defaultbox生成8742个，但是在训练")]),t._v(" "),i("h3",{attrs:{id:"正负样本选取"}},[i("a",{staticClass:"header-anchor",attrs:{href:"#正负样本选取"}},[t._v("#")]),t._v(" 正负样本选取")]),t._v(" "),i("p",[t._v("正样本选择defaultbox和groundtruth的iou最大的作为正样本，对于任意一个defaultbox，如果iou大于0.5，也认为是正样本")]),t._v(" "),i("p",[t._v("负样本，除了正样本，都可以定义为负样本，但是在训练过程中，defaultbox匹配到groundtruth的很少基本就十几个，而负样本很多的话，就会造成样本不平衡")]),t._v(" "),i("p",[t._v("因此对负样本的confidence loss，如果它更小，则越有可能是目标，因此取最大的几个（大约与正样本比例为3：1）")]),t._v(" "),i("p",[t._v("这种称作hard negatibe mining方法")]),t._v(" "),i("h3",{attrs:{id:"计算损失"}},[i("a",{staticClass:"header-anchor",attrs:{href:"#计算损失"}},[t._v("#")]),t._v(" 计算损失")]),t._v(" "),i("p",[t._v("损失分为两个类别损失和定位损失")]),t._v(" "),i("p",[i("span",{staticClass:"katex-display"},[i("span",{staticClass:"katex"},[i("span",{staticClass:"katex-mathml"},[i("math",[i("semantics",[i("mrow",[i("mi",[t._v("L")]),i("mo",[t._v("(")]),i("mi",[t._v("x")]),i("mo",{attrs:{separator:"true"}},[t._v(";")]),i("mi",[t._v("c")]),i("mo",{attrs:{separator:"true"}},[t._v(",")]),i("mi",[t._v("l")]),i("mo",{attrs:{separator:"true"}},[t._v(",")]),i("mi",[t._v("g")]),i("mo",[t._v(")")]),i("mo",[t._v("=")]),i("mfrac",[i("mrow",[i("mn",[t._v("1")])],1),i("mrow",[i("mi",[t._v("N")])],1)],1),i("mo",[t._v("(")]),i("msub",[i("mi",[t._v("L")]),i("mrow",[i("mi",[t._v("c")]),i("mi",[t._v("o")]),i("mi",[t._v("n")]),i("mi",[t._v("f")])],1)],1),i("mo",[t._v("(")]),i("mi",[t._v("x")]),i("mo",{attrs:{separator:"true"}},[t._v(",")]),i("mi",[t._v("c")]),i("mo",[t._v(")")]),i("mo",[t._v("+")]),i("mi",[t._v("α")]),i("msub",[i("mi",[t._v("L")]),i("mrow",[i("mi",[t._v("l")]),i("mi",[t._v("o")]),i("mi",[t._v("c")])],1)],1),i("mo",[t._v("(")]),i("mi",[t._v("x")]),i("mo",{attrs:{separator:"true"}},[t._v(",")]),i("mi",[t._v("l")]),i("mo",{attrs:{separator:"true"}},[t._v(",")]),i("mi",[t._v("g")]),i("mo",[t._v(")")]),i("mo",[t._v(")")])],1),i("annotation",{attrs:{encoding:"application/x-tex"}},[t._v("L(x;c,l,g)=\\frac{1}{N}(L_{conf}(x,c)+\\alpha L_{loc}(x,l,g))\n")])],1)],1)],1),i("span",{staticClass:"katex-html",attrs:{"aria-hidden":"true"}},[i("span",{staticClass:"strut",staticStyle:{height:"1.32144em"}}),i("span",{staticClass:"strut bottom",staticStyle:{height:"2.00744em","vertical-align":"-0.686em"}}),i("span",{staticClass:"base displaystyle textstyle uncramped"},[i("span",{staticClass:"mord mathit"},[t._v("L")]),i("span",{staticClass:"mopen"},[t._v("(")]),i("span",{staticClass:"mord mathit"},[t._v("x")]),i("span",{staticClass:"mpunct"},[t._v(";")]),i("span",{staticClass:"mord mathit"},[t._v("c")]),i("span",{staticClass:"mpunct"},[t._v(",")]),i("span",{staticClass:"mord mathit",staticStyle:{"margin-right":"0.01968em"}},[t._v("l")]),i("span",{staticClass:"mpunct"},[t._v(",")]),i("span",{staticClass:"mord mathit",staticStyle:{"margin-right":"0.03588em"}},[t._v("g")]),i("span",{staticClass:"mclose"},[t._v(")")]),i("span",{staticClass:"mrel"},[t._v("=")]),i("span",{staticClass:"mord reset-textstyle displaystyle textstyle uncramped"},[i("span",{staticClass:"sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"}),i("span",{staticClass:"mfrac"},[i("span",{staticClass:"vlist"},[i("span",{staticStyle:{top:"0.686em"}},[i("span",{staticClass:"fontsize-ensurer reset-size5 size5"},[i("span",{staticStyle:{"font-size":"0em"}},[t._v("​")])]),i("span",{staticClass:"reset-textstyle textstyle cramped"},[i("span",{staticClass:"mord textstyle cramped"},[i("span",{staticClass:"mord mathit",staticStyle:{"margin-right":"0.10903em"}},[t._v("N")])])])]),i("span",{staticStyle:{top:"-0.22999999999999998em"}},[i("span",{staticClass:"fontsize-ensurer reset-size5 size5"},[i("span",{staticStyle:{"font-size":"0em"}},[t._v("​")])]),i("span",{staticClass:"reset-textstyle textstyle uncramped frac-line"})]),i("span",{staticStyle:{top:"-0.677em"}},[i("span",{staticClass:"fontsize-ensurer reset-size5 size5"},[i("span",{staticStyle:{"font-size":"0em"}},[t._v("​")])]),i("span",{staticClass:"reset-textstyle textstyle uncramped"},[i("span",{staticClass:"mord textstyle uncramped"},[i("span",{staticClass:"mord mathrm"},[t._v("1")])])])]),i("span",{staticClass:"baseline-fix"},[i("span",{staticClass:"fontsize-ensurer reset-size5 size5"},[i("span",{staticStyle:{"font-size":"0em"}},[t._v("​")])]),t._v("​")])])]),i("span",{staticClass:"sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"})]),i("span",{staticClass:"mopen"},[t._v("(")]),i("span",{staticClass:"mord"},[i("span",{staticClass:"mord mathit"},[t._v("L")]),i("span",{staticClass:"vlist"},[i("span",{staticStyle:{top:"0.15em","margin-right":"0.05em","margin-left":"0em"}},[i("span",{staticClass:"fontsize-ensurer reset-size5 size5"},[i("span",{staticStyle:{"font-size":"0em"}},[t._v("​")])]),i("span",{staticClass:"reset-textstyle scriptstyle cramped"},[i("span",{staticClass:"mord scriptstyle cramped"},[i("span",{staticClass:"mord mathit"},[t._v("c")]),i("span",{staticClass:"mord mathit"},[t._v("o")]),i("span",{staticClass:"mord mathit"},[t._v("n")]),i("span",{staticClass:"mord mathit",staticStyle:{"margin-right":"0.10764em"}},[t._v("f")])])])]),i("span",{staticClass:"baseline-fix"},[i("span",{staticClass:"fontsize-ensurer reset-size5 size5"},[i("span",{staticStyle:{"font-size":"0em"}},[t._v("​")])]),t._v("​")])])]),i("span",{staticClass:"mopen"},[t._v("(")]),i("span",{staticClass:"mord mathit"},[t._v("x")]),i("span",{staticClass:"mpunct"},[t._v(",")]),i("span",{staticClass:"mord mathit"},[t._v("c")]),i("span",{staticClass:"mclose"},[t._v(")")]),i("span",{staticClass:"mbin"},[t._v("+")]),i("span",{staticClass:"mord mathit",staticStyle:{"margin-right":"0.0037em"}},[t._v("α")]),i("span",{staticClass:"mord"},[i("span",{staticClass:"mord mathit"},[t._v("L")]),i("span",{staticClass:"vlist"},[i("span",{staticStyle:{top:"0.15em","margin-right":"0.05em","margin-left":"0em"}},[i("span",{staticClass:"fontsize-ensurer reset-size5 size5"},[i("span",{staticStyle:{"font-size":"0em"}},[t._v("​")])]),i("span",{staticClass:"reset-textstyle scriptstyle cramped"},[i("span",{staticClass:"mord scriptstyle cramped"},[i("span",{staticClass:"mord mathit",staticStyle:{"margin-right":"0.01968em"}},[t._v("l")]),i("span",{staticClass:"mord mathit"},[t._v("o")]),i("span",{staticClass:"mord mathit"},[t._v("c")])])])]),i("span",{staticClass:"baseline-fix"},[i("span",{staticClass:"fontsize-ensurer reset-size5 size5"},[i("span",{staticStyle:{"font-size":"0em"}},[t._v("​")])]),t._v("​")])])]),i("span",{staticClass:"mopen"},[t._v("(")]),i("span",{staticClass:"mord mathit"},[t._v("x")]),i("span",{staticClass:"mpunct"},[t._v(",")]),i("span",{staticClass:"mord mathit",staticStyle:{"margin-right":"0.01968em"}},[t._v("l")]),i("span",{staticClass:"mpunct"},[t._v(",")]),i("span",{staticClass:"mord mathit",staticStyle:{"margin-right":"0.03588em"}},[t._v("g")]),i("span",{staticClass:"mclose"},[t._v(")")]),i("span",{staticClass:"mclose"},[t._v(")")])])])])])]),t._v(" "),i("p",[t._v("其中N为匹配到的正样本的个数，"),i("span",{staticClass:"katex"},[i("span",{staticClass:"katex-mathml"},[i("math",[i("semantics",[i("mrow",[i("mi",[t._v("α")])],1),i("annotation",{attrs:{encoding:"application/x-tex"}},[t._v("\\alpha")])],1)],1)],1),i("span",{staticClass:"katex-html",attrs:{"aria-hidden":"true"}},[i("span",{staticClass:"strut",staticStyle:{height:"0.43056em"}}),i("span",{staticClass:"strut bottom",staticStyle:{height:"0.43056em","vertical-align":"0em"}}),i("span",{staticClass:"base textstyle uncramped"},[i("span",{staticClass:"mord mathit",staticStyle:{"margin-right":"0.0037em"}},[t._v("α")])])])]),t._v("为1")])])}),[],!1,null,null,null);s.default=e.exports}}]);