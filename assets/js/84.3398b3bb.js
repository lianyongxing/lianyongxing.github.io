(window.webpackJsonp=window.webpackJsonp||[]).push([[84],{678:function(a,e,t){"use strict";t.r(e);var s=t(44),r=Object(s.a)({},(function(){var a=this,e=a.$createElement,t=a._self._c||e;return t("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[t("h1",{attrs:{id:"搭建apache-storm环境"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#搭建apache-storm环境"}},[a._v("#")]),a._v(" 搭建Apache Storm环境")]),a._v(" "),t("h2",{attrs:{id:"一、安装jdk"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#一、安装jdk"}},[a._v("#")]),a._v(" 一、安装JDK")]),a._v(" "),t("h3",{attrs:{id:"下载jdk安装包"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#下载jdk安装包"}},[a._v("#")]),a._v(" 下载JDK安装包")]),a._v(" "),t("ol",[t("li",[a._v("下载jdk安装包（jdk-8u201-linux-x64.tar.gz），不同的jdk版本略有差异，最好选择稳定版。"),t("br"),a._v(" "),t("a",{attrs:{href:"https://www.oracle.com/technetwork/java/javase/downloads/index.html",title:"jdk下载地址",target:"_blank",rel:"noopener noreferrer"}},[a._v("安装包下载地址"),t("OutboundLink")],1)]),a._v(" "),t("li",[a._v("解压安装包到目录/usr/lib/jdk目录下（与jdk的环境变量配置有关）")])]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("tar -zxvf jdk-8u201-linux-x64.tar.gz\nmkdir /usr/lib/jdk\nmv jdk-8u201-linux-x64 /usr/lib/jdk\n")])])]),t("h3",{attrs:{id:"配置java环境变量"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#配置java环境变量"}},[a._v("#")]),a._v(" 配置Java环境变量")]),a._v(" "),t("ul",[t("li",[a._v("打开环境变量的配置文件profile")])]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("vim /etc/profile\n")])])]),t("ul",[t("li",[a._v("修改配置文件，在/etc/profile文件最后加入")])]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("#set java env\nexport JAVA_HOME=/usr/lib/jdk/jdk1.8.0_201\nexport JRE_HOME=${JAVA_HOME}/jre    \nexport CLASSPATH=.:${JAVA_HOME}/lib:${JRE_HOME}/lib    \nexport PATH=${JAVA_HOME}/bin:$PATH\n")])])]),t("ul",[t("li",[a._v("使配置文件生效")])]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("source /etc/profile\n")])])]),t("ul",[t("li",[a._v("测试是否添加成功（输入下列代码，会输出所设定的环境变量）")])]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("echo $JAVA_HOME\n")])])]),t("h2",{attrs:{id:"二、安装zookeeper"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#二、安装zookeeper"}},[a._v("#")]),a._v(" 二、安装Zookeeper")]),a._v(" "),t("h3",{attrs:{id:"下载zookeeper安装包"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#下载zookeeper安装包"}},[a._v("#")]),a._v(" 下载Zookeeper安装包")]),a._v(" "),t("ol",[t("li",[t("p",[a._v("下载Zookeeper安装包（zookeeper-3.4.12.tar.gz），此处使用3.4.12版本。"),t("br"),a._v(" "),t("a",{attrs:{href:"https://zookeeper.apache.org/releases.html#download",title:"zookeeper下载地址",target:"_blank",rel:"noopener noreferrer"}},[a._v("安装包下载地址"),t("OutboundLink")],1)])]),a._v(" "),t("li",[t("p",[a._v("解压安装包")])])]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("tar -zxvf zookeeper-3.4.12.tar.gz\n")])])]),t("h3",{attrs:{id:"配置zookeeper"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#配置zookeeper"}},[a._v("#")]),a._v(" 配置Zookeeper")]),a._v(" "),t("ul",[t("li",[a._v("首先在Zookeeper的根目录zookeeper下建立两个文件夹，一个叫做data文件夹，用来存放数据；一个叫做logs，用来存放日志信息")])]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("mkdir data\nmkdir logs\n")])])]),t("ul",[t("li",[a._v("在Zookeeper的根目录下，存在/conf/zoo_example.cfg示例配置文件，复制一个示例配置文件，并改名为zoo.cfg（真正起作用的是zoo.cfg文件）")])]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("cp zoo_example.cfg zoo.cfg\n")])])]),t("ul",[t("li",[a._v("在zoo.cfg中修改数据存储和日志存储的文件夹（zookeeper目录为Zookeeper的根目录）")])]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("dataDir=/home/node06/Desktop/software/zookeeper/data（本机中data文件夹的绝对路径）\ndataLogDir=/home/node06/Desktop/software/zookeeper/logs（本机中logs文件夹的绝对路径）\n")])])]),t("ul",[t("li",[a._v("然后添加配置的Zookeeper节点的主机号（这里配置了4个节点），例如：server.1=这台主机名字:2888:3888，其中2888是通信的端口，3888是选举的端口")])]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("server.1=192.168.xxx.xxx:2888:3888\nserver.2=192.168.xxx.xxx:4888:5888\nserver.3=192.168.xxx.xxx:6888:7888\nserver.4=192.168.xxx.xxx:8888:9888\n")])])]),t("ul",[t("li",[a._v("在刚才创建的data文件夹下，建立一个文件myid存放这台主机的id号，也就是server.后面的数字（例如server.1，则建立一个myid文件，写入内容的是1），在data文件夹下运行如下命令")])]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("echo 1 > myid\n")])])]),t("h3",{attrs:{id:"启动服务端-客户端"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#启动服务端-客户端"}},[a._v("#")]),a._v(" 启动服务端/客户端")]),a._v(" "),t("ul",[t("li",[a._v("启动服务端（在zookeeper的根目录下的bin文件夹下）")])]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("zkServer.sh start\n")])])]),t("ul",[t("li",[a._v("运行客户端（在zookeeper的根目录下的bin文件夹下）")])]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("zkCli.sh\n")])])]),t("h2",{attrs:{id:"三、安装apache-storm"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#三、安装apache-storm"}},[a._v("#")]),a._v(" 三、安装Apache-storm")]),a._v(" "),t("h3",{attrs:{id:"下载storm安装包"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#下载storm安装包"}},[a._v("#")]),a._v(" 下载Storm安装包")]),a._v(" "),t("ol",[t("li",[a._v("下载storm安装包（apache-storm-1.1.0.tar.gz），不同版本的storm配置文件略有差异，此处使用1.1.0版本。"),t("br"),a._v(" "),t("a",{attrs:{href:"http://storm.apache.org/downloads.html",title:"apache-storm-1.1.0下载地址",target:"_blank",rel:"noopener noreferrer"}},[a._v("安装包下载地址"),t("OutboundLink")],1)]),a._v(" "),t("li",[a._v("解压安装包到指定目录/usr/local/storm(也可以是其他任意目录，但第三步中的环境变量应该与之对应)")])]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("tar -zxvf apache-storm-1.1.0.tar.gz\nmv apache-storm-1.1.0 storm\n")])])]),t("h3",{attrs:{id:"配置环境变量"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#配置环境变量"}},[a._v("#")]),a._v(" 配置环境变量")]),a._v(" "),t("ol",{attrs:{start:"3"}},[t("li",[a._v("修改环境变量")])]),a._v(" "),t("ul",[t("li",[a._v("打开配置文件profile")])]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("vim /etc/profile\n")])])]),t("ul",[t("li",[a._v("修改配置文件"),t("br"),a._v("\n在文件最后加入：")])]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("export STORM_HOME=/usr/local/storm\nexport PATH=$STORM_HOME/bin:$PATH\n")])])]),t("ul",[t("li",[a._v("使配置文件生效")])]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("source /etc/profile\n")])])]),t("h3",{attrs:{id:"修改storm配置文件"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#修改storm配置文件"}},[a._v("#")]),a._v(" 修改Storm配置文件")]),a._v(" "),t("p",[a._v("4.修改storm的配置文件(注意：配置行前都有一个空格！！！)")]),a._v(" "),t("ul",[t("li",[a._v("进入storm的配置文件")])]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("vi storm/conf/storm.yaml\n")])])]),t("ul",[t("li",[a._v("配置Zookeeper的主机地址"),t("br"),a._v("\n在配置文件中加入Zookeeper的主机地址（有几个加几个）")])]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v('####These MUST be filled in for a storm configuration\n storm.zookeeper.servers:\n - "192.168.xxx.xxx"\n - "192.168.xxx.xxx"\n - "192.168.xxx.xxx"\n - "192.168.xxx.xxx" \n')])])]),t("ul",[t("li",[a._v("配置nimbus的主机地址")])]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v(' nimbus.host: "192.168.xxx.xxx" \n')])])]),t("ul",[t("li",[a._v("设置nimbus本地目录(客户端提交一个jar文件，jar文件会保存在此目录下)")])]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v(' storm.local.dir: "/home/node06/Desktop/software/storm/data"\n')])])]),t("ul",[t("li",[a._v("配置从节点上的worker，下面设置4个worker和它们对应的端口（可根据自己的需要设置不同个数）")])]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v(" supervisor.slots.ports:\n  - 6700\n  - 6701\n  - 6702\n  - 6703\n")])])]),t("h3",{attrs:{id:"启动运行"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#启动运行"}},[a._v("#")]),a._v(" 启动运行")]),a._v(" "),t("p",[a._v("5.启动storm")]),a._v(" "),t("ul",[t("li",[a._v("启动主节点")])]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("storm nimbus &\n")])])]),t("ul",[t("li",[a._v("启动从节点")])]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("storm supervisor &\n")])])]),t("ul",[t("li",[a._v("启动日志查看器")])]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("storm logviewer &\n")])])]),t("ul",[t("li",[a._v("启动UI管理界面")])]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("storm ui &\n\n")])])])])}),[],!1,null,null,null);e.default=r.exports}}]);